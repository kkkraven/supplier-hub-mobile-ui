# üö¶ LIMITS SYSTEM DOCUMENTATION

## üìã –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã –ª–∏–º–∏—Ç–æ–≤

–°–∏—Å—Ç–µ–º–∞ –ª–∏–º–∏—Ç–æ–≤ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∫ —Ä–µ—Å—É—Ä—Å–∞–º –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏—Ö —Ç–∞—Ä–∏—Ñ–Ω–æ–≥–æ –ø–ª–∞–Ω–∞. –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ, –ø—Ä–∏–º–µ–Ω—è–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –∞–ø–≥—Ä–µ–π–¥—ã.

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### ‚úÖ **–ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã–µ —Ä–µ—Å—É—Ä—Å—ã:**
- üè≠ **–î–æ—Å—Ç—É–ø –∫ —Ñ–∞–±—Ä–∏–∫–∞–º** - –ø—Ä–æ—Å–º–æ—Ç—Ä –∫–æ–Ω—Ç–∞–∫—Ç–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
- üìã **–°–æ–∑–¥–∞–Ω–∏–µ RFQ** - –æ—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ
- üìä **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è** - –¥–µ—Ç–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
- üìà **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∞–ø–≥—Ä–µ–π–¥–∞** - —É–º–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è

### ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏:**
- üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–æ–≤ –ø–µ—Ä–µ–¥ –¥–µ–π—Å—Ç–≤–∏–µ–º
- üõ°Ô∏è –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π
- üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π
- üîÑ Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

### üìÅ **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤:**

```
src/
‚îú‚îÄ‚îÄ app/api/limits/
‚îÇ   ‚îú‚îÄ‚îÄ factory-access/route.ts    # API –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–±—Ä–∏–∫–∞–º
‚îÇ   ‚îú‚îÄ‚îÄ rfq-access/route.ts        # API —Å–æ–∑–¥–∞–Ω–∏—è RFQ
‚îÇ   ‚îî‚îÄ‚îÄ activity/route.ts          # API –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
‚îú‚îÄ‚îÄ components/limits/
‚îÇ   ‚îú‚îÄ‚îÄ LimitsChecker.tsx          # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –ª–∏–º–∏—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ UsageStats.tsx             # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îî‚îÄ‚îÄ useLimitsEnforcement.ts    # –•—É–∫ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –ª–∏–º–∏—Ç–æ–≤
‚îî‚îÄ‚îÄ components/factory/
    ‚îî‚îÄ‚îÄ FactoryContactProtected.tsx # –ó–∞—â–∏—â–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã —Ñ–∞–±—Ä–∏–∫
```

## üéØ API Endpoints

### **1. POST /api/limits/factory-access**
–ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–±—Ä–∏–∫–µ

**Request Body:**
```json
{
  "factory_id": "uuid"
}
```

**Response (Success):**
```json
{
  "success": true,
  "data": {
    "access_granted": true,
    "factories_used": 5,
    "factories_remaining": 5,
    "factories_limit": 10
  }
}
```

**Response (Limit Exceeded):**
```json
{
  "success": false,
  "error": "Factory access limit exceeded",
  "data": {
    "limit_exceeded": true,
    "current_plan": "starter",
    "factories_used": 10,
    "factories_limit": 10,
    "suggested_plan": "professional"
  }
}
```

### **2. GET /api/limits/factory-access?factory_id=uuid**
–ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–±—Ä–∏–∫–µ

**Response:**
```json
{
  "success": true,
  "data": {
    "has_access": true,
    "access_date": "2025-01-22T10:30:00Z",
    "factories_used": 5,
    "factories_remaining": 5,
    "factories_limit": 10,
    "plan_name": "starter"
  }
}
```

### **3. POST /api/limits/rfq-access**
–°–æ–∑–¥–∞–Ω–∏–µ RFQ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –ª–∏–º–∏—Ç–æ–≤

**Request Body:**
```json
{
  "rfq_data": {
    "title": "Cotton T-shirts Production",
    "description": "Need 1000 cotton t-shirts",
    "category": "apparel",
    "quantity": 1000,
    "budget_min": 5000,
    "budget_max": 8000,
    "deadline": "2025-03-01",
    "requirements": ["OEKO-TEX", "GOTS"],
    "target_countries": ["China", "Turkey"]
  }
}
```

**Response:**
```json
{
  "success": true,
  "data": {
    "rfq_id": "uuid",
    "rfq_used": 3,
    "rfq_remaining": 7,
    "rfq_limit": 10,
    "is_unlimited": false
  }
}
```

### **4. GET/POST /api/limits/activity**
–ü–æ–ª—É—á–µ–Ω–∏–µ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**GET Parameters:**
- `limit` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 20)
- `offset` - —Å–º–µ—â–µ–Ω–∏–µ –¥–ª—è –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
- `action` - —Ñ–∏–ª—å—Ç—Ä –ø–æ —Ç–∏–ø—É –¥–µ–π—Å—Ç–≤–∏—è
- `days` - –ø–µ—Ä–∏–æ–¥ –≤ –¥–Ω—è—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 30)

**Response:**
```json
{
  "success": true,
  "data": {
    "activities": [
      {
        "id": "uuid",
        "action": "factory_access",
        "resource_type": "factory",
        "resource_id": "factory_uuid",
        "metadata": {
          "factory_name": "Shanghai Textiles Co."
        },
        "created_at": "2025-01-22T10:30:00Z"
      }
    ],
    "stats": {
      "total_activities": 25,
      "by_action": {
        "factory_access": 15,
        "rfq_created": 10
      },
      "daily_activity": {
        "2025-01-22": 5,
        "2025-01-21": 3
      }
    }
  }
}
```

## üé® React Components

### **1. LimitsChecker**
–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ª–∏–º–∏—Ç–æ–≤ –ø–µ—Ä–µ–¥ –¥–µ–π—Å—Ç–≤–∏–µ–º

```tsx
import { LimitsChecker } from '@/components/limits/LimitsChecker';

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–±—Ä–∏–∫–µ
<LimitsChecker
  action="factory_access"
  resourceId="factory-123"
  onSuccess={(result) => console.log('Access granted:', result)}
  onLimitExceeded={(limits) => console.log('Limit exceeded:', limits)}
  showProgress={true}
>
  <Button>–ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç—ã —Ñ–∞–±—Ä–∏–∫–∏</Button>
</LimitsChecker>

// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è RFQ
<LimitsChecker
  action="rfq_creation"
  onSuccess={() => router.push('/rfq/create')}
  onLimitExceeded={() => setShowUpgrade(true)}
>
  <Button>–°–æ–∑–¥–∞—Ç—å RFQ</Button>
</LimitsChecker>
```

### **2. UsageStats**
–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```tsx
import { UsageStats } from '@/components/limits/UsageStats';

<UsageStats />
```

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- üìä –û–±–∑–æ—Ä –ª–∏–º–∏—Ç–æ–≤ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- üìà –ü—Ä–æ–≥—Ä–µ—Å—Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- üìÖ –ò—Å—Ç–æ—Ä–∏—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∞–ø–≥—Ä–µ–π–¥—É

### **3. FactoryContactProtected**
–ó–∞—â–∏—â–µ–Ω–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ —Ñ–∞–±—Ä–∏–∫–∏

```tsx
import { FactoryContactProtected } from '@/components/factory/FactoryContactProtected';

<FactoryContactProtected
  factory={{
    id: "factory-123",
    name: "Shanghai Textiles Co.",
    contact: {
      email: "contact@shanghai-textiles.com",
      phone: "+86 21 1234 5678"
    }
  }}
  onAccessGranted={(factory) => trackEvent('factory_contact_accessed')}
  showPreview={true}
/>
```

## üîß React Hooks

### **useLimitsEnforcement**
–•—É–∫ –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –ª–∏–º–∏—Ç–æ–≤

```tsx
import { useLimitsEnforcement } from '@/hooks/useLimitsEnforcement';

const MyComponent = () => {
  const {
    limits,
    checkFactoryAccess,
    enforceFactoryAccess,
    checkRfqCreation,
    enforceRfqCreation,
    getProcessingStatus
  } = useLimitsEnforcement();

  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–æ–≤
  const handleFactoryClick = async (factoryId: string) => {
    const canAccess = await checkFactoryAccess({ factoryId });
    
    if (canAccess.canProceed) {
      const result = await enforceFactoryAccess({ factoryId });
      if (result.success) {
        // –î–æ—Å—Ç—É–ø –ø–æ–ª—É—á–µ–Ω
        showFactoryContacts(result.data);
      }
    } else {
      // –õ–∏–º–∏—Ç –ø—Ä–µ–≤—ã—à–µ–Ω
      showUpgradeModal(canAccess.suggestedPlan);
    }
  };

  return (
    <div>
      <p>–§–∞–±—Ä–∏–∫–∏: {limits?.factoriesUsed} / {limits?.factoriesLimit}</p>
      <Button 
        onClick={() => handleFactoryClick('factory-123')}
        disabled={getProcessingStatus('factory_factory-123')}
      >
        –ü–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø
      </Button>
    </div>
  );
};
```

## üìä –õ–∏–º–∏—Ç—ã –ø–æ –ø–ª–∞–Ω–∞–º

### **Starter Plan (990‚ÇΩ/–º–µ—Å):**
- üè≠ **–§–∞–±—Ä–∏–∫–∏**: 10 –¥–æ—Å—Ç—É–ø–æ–≤ –≤ –º–µ—Å—è—Ü
- üìã **RFQ**: 5 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–µ—Å—è—Ü
- üìà **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞**: –ë–∞–∑–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- ‚è∞ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞**: Email (48 —á–∞—Å–æ–≤)

### **Professional Plan (2990‚ÇΩ/–º–µ—Å):**
- üè≠ **–§–∞–±—Ä–∏–∫–∏**: 50 –¥–æ—Å—Ç—É–ø–æ–≤ –≤ –º–µ—Å—è—Ü
- üìã **RFQ**: 25 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–µ—Å—è—Ü
- üìà **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞**: –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- ‚è∞ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞**: Email + Chat (24 —á–∞—Å–∞)
- üéØ **–≠–∫—Å–∫–ª—é–∑–∏–≤**: –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ —Ñ–∞–±—Ä–∏–∫–∏

### **Enterprise Plan (7990‚ÇΩ/–º–µ—Å):**
- üè≠ **–§–∞–±—Ä–∏–∫–∏**: –ë–µ–∑–ª–∏–º–∏—Ç–Ω—ã–π –¥–æ—Å—Ç—É–ø
- üìã **RFQ**: –ë–µ–∑–ª–∏–º–∏—Ç–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- üìà **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞**: –ü–æ–ª–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ + API
- ‚è∞ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞**: –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è (4 —á–∞—Å–∞)
- üéØ **–≠–∫—Å–∫–ª—é–∑–∏–≤**: –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä
- üíº **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ**: –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è

## üîÑ Workflow —Å–∏—Å—Ç–µ–º—ã –ª–∏–º–∏—Ç–æ–≤

### **1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–±—Ä–∏–∫–µ:**
```mermaid
graph TD
    A[–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∫–ª–∏–∫–∞–µ—Ç –Ω–∞ —Ñ–∞–±—Ä–∏–∫—É] --> B[–ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ–π –ø–æ–¥–ø–∏—Å–∫–∏]
    B -->|–ù–µ—Ç –ø–æ–¥–ø–∏—Å–∫–∏| C[–ü–æ–∫–∞–∑–∞—Ç—å upgrade modal]
    B -->|–ï—Å—Ç—å –ø–æ–¥–ø–∏—Å–∫–∞| D[–ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–æ–≤]
    D -->|–õ–∏–º–∏—Ç –ø—Ä–µ–≤—ã—à–µ–Ω| E[–ü–æ–∫–∞–∑–∞—Ç—å upgrade –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ]
    D -->|–õ–∏–º–∏—Ç –≤ –Ω–æ—Ä–º–µ| F[–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –¥–æ—Å—Ç—É–ø–∞]
    F -->|–£–∂–µ –±—ã–ª –¥–æ—Å—Ç—É–ø| G[–ü–æ–∫–∞–∑–∞—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç—ã]
    F -->|–ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞| H[–ó–∞–ø–∏—Å–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ]
    H --> I[–ü–æ–∫–∞–∑–∞—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç—ã]
    I --> J[–õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å]
```

### **2. –°–æ–∑–¥–∞–Ω–∏–µ RFQ:**
```mermaid
graph TD
    A[–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–µ—Ç RFQ] --> B[–ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ–π –ø–æ–¥–ø–∏—Å–∫–∏]
    B -->|–ù–µ—Ç –ø–æ–¥–ø–∏—Å–∫–∏| C[–ü–æ–∫–∞–∑–∞—Ç—å upgrade modal]
    B -->|–ï—Å—Ç—å –ø–æ–¥–ø–∏—Å–∫–∞| D[–ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–æ–≤ RFQ]
    D -->|–õ–∏–º–∏—Ç –ø—Ä–µ–≤—ã—à–µ–Ω| E[–ü–æ–∫–∞–∑–∞—Ç—å upgrade –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ]
    D -->|–ë–µ–∑–ª–∏–º–∏—Ç–Ω—ã–π –ø–ª–∞–Ω| F[–°–æ–∑–¥–∞—Ç—å RFQ]
    D -->|–õ–∏–º–∏—Ç –≤ –Ω–æ—Ä–º–µ| G[–ó–∞–ø–∏—Å–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ]
    G --> F[–°–æ–∑–¥–∞—Ç—å RFQ]
    F --> H[–õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å]
```

## üéØ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å PaywallGuard

–°–∏—Å—Ç–µ–º–∞ –ª–∏–º–∏—Ç–æ–≤ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ —Å PaywallGuard:

```tsx
import { PaywallGuard } from '@/components/subscription/PaywallGuard';

// –ó–∞—â–∏—Ç–∞ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ —Ñ–∞–±—Ä–∏–∫–∏
<PaywallGuard 
  requiredPlan="starter" 
  requiredFeature="–î–æ—Å—Ç—É–ø –∫ –∫–æ–Ω—Ç–∞–∫—Ç–∞–º —Ñ–∞–±—Ä–∏–∫"
  variant="overlay"
>
  <FactoryContactInfo factory={factory} />
</PaywallGuard>

// –ó–∞—â–∏—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è RFQ
<PaywallGuard 
  requiredPlan="professional" 
  requiredFeature="–°–æ–∑–¥–∞–Ω–∏–µ RFQ –∑–∞–ø—Ä–æ—Å–æ–≤"
  variant="banner"
>
  <RFQCreationForm />
</PaywallGuard>
```

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

### **–û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã–µ –º–µ—Ç—Ä–∏–∫–∏:**
- üìä –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤ –ø–æ –ø–ª–∞–Ω–∞–º
- üéØ –ö–æ–Ω–≤–µ—Ä—Å–∏—è –≤ –∞–ø–≥—Ä–µ–π–¥—ã
- üìÖ –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- üö´ –°–ª—É—á–∞–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è –ª–∏–º–∏—Ç–æ–≤
- üí∞ Revenue impact –æ—Ç –ª–∏–º–∏—Ç–æ–≤

### **Dashboards:**
- üè≠ **–§–∞–±—Ä–∏–∫–∏**: –¢–æ–ø –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã–µ —Ñ–∞–±—Ä–∏–∫–∏
- üìã **RFQ**: –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ –æ–±—ä–µ–º—ã –∑–∞–ø—Ä–æ—Å–æ–≤
- üë• **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏**: –ü–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã
- üíé **–ê–ø–≥—Ä–µ–π–¥—ã**: –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π

## üõ†Ô∏è –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ

### **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–∏–º–∏—Ç–æ–≤:**
–õ–∏–º–∏—Ç—ã –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ `subscription_plans`:

```sql
UPDATE subscription_plans 
SET 
  factory_limit = 20,  -- –ù–æ–≤—ã–π –ª–∏–º–∏—Ç —Ñ–∞–±—Ä–∏–∫
  rfq_limit = 10       -- –ù–æ–≤—ã–π –ª–∏–º–∏—Ç RFQ
WHERE name = 'starter';
```

### **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```sql
-- –¢–æ–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
SELECT 
  u.email,
  ul.factories_used,
  ul.rfq_used,
  sp.name as plan_name
FROM user_limits ul
JOIN users u ON ul.user_id = u.id
JOIN subscription_plans sp ON ul.plan_id = sp.id
ORDER BY ul.factories_used DESC
LIMIT 10;

-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–π –ª–∏–º–∏—Ç–æ–≤
SELECT 
  action,
  COUNT(*) as attempts,
  DATE(created_at) as date
FROM user_activity_log 
WHERE metadata->>'limit_exceeded' = 'true'
GROUP BY action, DATE(created_at)
ORDER BY date DESC;
```

## üöÄ Production Checklist

### **–ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º:**
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –ª–∏–º–∏—Ç—ã –¥–ª—è –≤—Å–µ—Ö –ø–ª–∞–Ω–æ–≤
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤—Å–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –º–µ—Ç—Ä–∏–∫
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å PaywallGuard
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö

### **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
- [ ] –ê–ª–µ—Ä—Ç—ã –Ω–∞ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ error rate
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–∫–ª–∏–∫–∞ API
- [ ] –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏ –≤ –∞–ø–≥—Ä–µ–π–¥—ã
- [ ] –ê–Ω–∞–ª–∏–∑ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

**–ü–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ª–∏–º–∏—Ç–æ–≤:**

1. **üîí –ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π
2. **üìä –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤—Å–µ–≥–¥–∞ –∑–Ω–∞—é—Ç —Å–≤–æ–∏ –ª–∏–º–∏—Ç—ã
3. **üí∞ –ú–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è** - —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –∞–ø–≥—Ä–µ–π–¥–∞
4. **üìà –ê–Ω–∞–ª–∏—Ç–∏–∫–∞** - –¥–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
5. **üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –∑–∞—â–∏—Ç–∞ –æ—Ç –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è –ª–∏–º–∏—Ç–æ–≤
6. **üéØ UX** - –ø–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã –∏ –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—é! üöÄ**
