# ОТЧЕТ ОБ ОБНОВЛЕНИИ СТАТИСТИКИ И СЧЕТЧИКОВ ФАБРИК

## Выполненные изменения

### 1. Обновление общего количества фабрик
- **Было:** 70+ фабрик
- **Стало:** 30 фабрик

### 2. Обновление счетчиков по категориям

| Категория | Было | Стало |
|-----------|------|-------|
| **Деним** | 18 | **5** |
| **Трикотаж** | 25 | **7** |
| **Ткань** | 30 | **6** |
| **Спортивная одежда** | 22 | **4** |
| **Аксессуары** | 12 | **8** |
| **Верхняя одежда** | 15 | **0** |

**Общая сумма:** 30 фабрик (5+7+6+4+8+0)

## Обновленные файлы

### 1. База данных
- `web/update_factory_stats.sql` - SQL-скрипт для обновления данных в базе

### 2. Компоненты React
- `web/src/components/pages/landing-page.tsx` - Главная страница
- `web/src/components/pages/catalog-page.tsx` - Страница каталога
- `web/src/components/pages/admin-dashboard-page.tsx` - Админ панель
- `components/pages/landing-page.tsx` - Компонент главной страницы
- `components/pages/admin-dashboard-page.tsx` - Компонент админ панели

## Детали обновлений

### Landing Page
- Обновлена статистика в секции `stats`: с "70+" на "30"
- Обновлена глобальная статистика `globalStats`: с "70+" на "30"
- Обновлены счетчики фабрик в массиве `categories`

### Catalog Page
- Обновлены счетчики фабрик в массиве `categories`
- Сохранены все остальные параметры (описания, изображения, MOQ, сроки)

### Admin Dashboard
- Обновлена статистика `totalFactories`: с 73 на 30
- Обновлена статистика `activeFactories`: с 68 на 25
- Сохранена статистика `pendingApproval`: 5

## SQL-скрипт для базы данных

Создан файл `web/update_factory_stats.sql` со следующими операциями:

```sql
-- Обновление счетчиков фабрик по категориям
UPDATE categories 
SET factory_count = CASE 
    WHEN slug = 'denim' THEN 5
    WHEN slug = 'knit' THEN 7
    WHEN slug = 'woven' THEN 6
    WHEN slug = 'activewear' THEN 4
    WHEN slug = 'accessories' THEN 8
    WHEN slug = 'outerwear' THEN 0
    ELSE factory_count
END
WHERE slug IN ('denim', 'knit', 'woven', 'activewear', 'accessories', 'outerwear');
```

## Проверка корректности

### Сумма по категориям
- Деним: 5
- Трикотаж: 7
- Ткань: 6
- Спортивная одежда: 4
- Аксессуары: 8
- Верхняя одежда: 0
- **Итого:** 30 фабрик ✅

### Обновленные значения
- Общее количество фабрик: 30 ✅
- Активные фабрики: 25 ✅
- Ожидающие одобрения: 5 ✅

## Следующие шаги

1. **Выполнить SQL-скрипт** в базе данных Supabase:
   ```bash
   psql -h your-supabase-host -U postgres -d postgres -f web/update_factory_stats.sql
   ```

2. **Проверить отображение** на следующих страницах:
   - Главная страница: http://localhost:3000
   - Каталог: http://localhost:3000/catalog
   - Админ панель: http://localhost:3000/admin

3. **Убедиться в корректности** отображения статистики во всех компонентах

## Примечания

- Все изменения выполнены в соответствии с требованиями
- Сохранена структура данных и функциональность
- Обновлены как статические данные в компонентах, так и SQL-скрипт для базы данных
- Категория "Верхняя одежда" установлена в 0 фабрик, так как не была указана в требованиях

---
**Дата обновления:** $(date)
**Статус:** ✅ Завершено
